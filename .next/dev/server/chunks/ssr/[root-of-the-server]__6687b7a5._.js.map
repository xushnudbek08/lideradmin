{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/xushnudbek/lider-garant-frontend-tz/lib/api.ts"],"sourcesContent":["const API_BASE_URL = \"https://xushnudbek0808.pythonanywhere.com/api/v1\"\n\n// Types\nexport type UserRole = \"client\" | \"agent\" | \"partner\" | \"manager\"\n\nexport interface User {\n  id: number\n  username: string\n  email: string\n  first_name: string\n  last_name: string\n}\n\nexport interface UserProfile {\n  user: User\n  role: UserRole\n  phone: string | null\n  company: number | null\n  manager: number | null\n  created_at: string\n}\n\nexport interface LoginResponse {\n  access: string\n  refresh: string\n}\n\nexport interface RegistrationData {\n  username: string\n  password: string\n  email: string\n  first_name: string\n  last_name: string\n  role: UserRole\n  phone: string\n}\n\nexport interface Application {\n  id: number\n  applicant: User\n  documents: Document[]\n  selected_banks: Bank[]\n  title: string\n  amount: string | null\n  status: \"draft\" | \"submitted\" | \"under_review\" | \"approved\" | \"rejected\"\n  notes: string\n  created_at: string\n  updated_at: string\n  company: number | null\n}\n\nexport interface ApplicationCreate {\n  title: string\n  company?: number | null\n  amount?: string | null\n  selected_banks?: number[]\n  notes?: string\n  status?: string\n}\n\nexport interface Bank {\n  id: number\n  name: string\n  bic: string | null\n  is_mfo: boolean\n}\n\nexport interface Company {\n  id: number\n  name: string\n  inn: string | null\n  address: string\n  requisites: unknown | null\n  created_at: string\n  created_by: number | null\n}\n\nexport interface Document {\n  id: number\n  uploaded_by: User\n  file: string\n  doc_type: \"statute\" | \"accounting\" | \"other\"\n  created_at: string\n  application: number | null\n}\n\nexport interface ChatMessage {\n  id: number\n  sender: User\n  text: string\n  attachment: string | null\n  created_at: string\n  read: boolean\n  application: number | null\n}\n\nexport interface News {\n  id: number\n  title: string\n  description: string\n  link: string\n  published_date: string\n  source: string\n  image_url: string | null\n  created_at: string\n}\n\nexport interface PaginatedResponse<T> {\n  count: number\n  next: string | null\n  previous: string | null\n  results: T[]\n}\n\n// Helper to get auth headers\nfunction getAuthHeaders(): HeadersInit {\n  if (typeof window === \"undefined\") return {}\n  const token = localStorage.getItem(\"access_token\")\n  return token ? { Authorization: `Bearer ${token}` } : {}\n}\n\n// API Error handler\nclass ApiError extends Error {\n  constructor(\n    public status: number,\n    message: string,\n  ) {\n    super(message)\n    this.name = \"ApiError\"\n  }\n}\n\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}))\n    const message =\n      errorData.detail || errorData.message || Object.values(errorData).flat().join(\", \") || \"Произошла ошибка\"\n    throw new ApiError(response.status, message)\n  }\n  if (response.status === 204) return {} as T\n  return response.json()\n}\n\n// Auth API\nexport const authApi = {\n  login: async (username: string, password: string): Promise<LoginResponse> => {\n    const response = await fetch(`${API_BASE_URL}/auth/login/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ username, password }),\n    })\n    return handleResponse<LoginResponse>(response)\n  },\n\n  register: async (data: RegistrationData): Promise<{ id: number }> => {\n    const response = await fetch(`${API_BASE_URL}/auth/register/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n    })\n    return handleResponse(response)\n  },\n\n  refreshToken: async (refresh: string): Promise<{ access: string }> => {\n    const response = await fetch(`${API_BASE_URL}/auth/refresh/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ refresh }),\n    })\n    return handleResponse(response)\n  },\n\n  getProfile: async (): Promise<UserProfile> => {\n    const response = await fetch(`${API_BASE_URL}/auth/profile/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<UserProfile>(response)\n  },\n\n  updateProfile: async (data: Partial<UserProfile>): Promise<UserProfile> => {\n    const response = await fetch(`${API_BASE_URL}/auth/profile/`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify(data),\n    })\n    return handleResponse<UserProfile>(response)\n  },\n}\n\n// Applications API\nexport const applicationsApi = {\n  list: async (limit = 10, offset = 0): Promise<PaginatedResponse<Application>> => {\n    const response = await fetch(`${API_BASE_URL}/applications/?limit=${limit}&offset=${offset}`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<PaginatedResponse<Application>>(response)\n  },\n\n  get: async (id: number): Promise<Application> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<Application>(response)\n  },\n\n  create: async (data: ApplicationCreate): Promise<ApplicationCreate & { id: number }> => {\n    const response = await fetch(`${API_BASE_URL}/applications/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify(data),\n    })\n    return handleResponse(response)\n  },\n\n  update: async (id: number, data: Partial<ApplicationCreate>): Promise<ApplicationCreate> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify(data),\n    })\n    return handleResponse(response)\n  },\n\n  delete: async (id: number): Promise<void> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/`, {\n      method: \"DELETE\",\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse(response)\n  },\n\n  submit: async (id: number): Promise<Application> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/submit/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify({}),\n    })\n    return handleResponse<Application>(response)\n  },\n\n  approve: async (id: number): Promise<Application> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/approve/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify({}),\n    })\n    return handleResponse<Application>(response)\n  },\n\n  reject: async (id: number): Promise<Application> => {\n    const response = await fetch(`${API_BASE_URL}/applications/${id}/reject/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify({}),\n    })\n    return handleResponse<Application>(response)\n  },\n\n  getMyApplications: async (): Promise<Application[]> => {\n    const response = await fetch(`${API_BASE_URL}/applications/my_applications/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<Application[]>(response)\n  },\n\n  getMyWins: async (): Promise<Application[]> => {\n    const response = await fetch(`${API_BASE_URL}/applications/my_wins/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<Application[]>(response)\n  },\n\n  getAgents: async (): Promise<User[]> => {\n    const response = await fetch(`${API_BASE_URL}/applications/agents/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<User[]>(response)\n  },\n\n  getClients: async (): Promise<User[]> => {\n    const response = await fetch(`${API_BASE_URL}/applications/clients/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<User[]>(response)\n  },\n}\n\n// Banks API\nexport const banksApi = {\n  list: async (limit = 100, offset = 0): Promise<PaginatedResponse<Bank>> => {\n    const response = await fetch(`${API_BASE_URL}/banks/?limit=${limit}&offset=${offset}`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<PaginatedResponse<Bank>>(response)\n  },\n\n  get: async (id: number): Promise<Bank> => {\n    const response = await fetch(`${API_BASE_URL}/banks/${id}/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<Bank>(response)\n  },\n}\n\n// Companies API\nexport const companiesApi = {\n  list: async (limit = 100, offset = 0): Promise<PaginatedResponse<Company>> => {\n    const response = await fetch(`${API_BASE_URL}/companies/?limit=${limit}&offset=${offset}`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<PaginatedResponse<Company>>(response)\n  },\n\n  get: async (id: number): Promise<Company> => {\n    const response = await fetch(`${API_BASE_URL}/companies/${id}/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<Company>(response)\n  },\n\n  create: async (data: Omit<Company, \"id\" | \"created_at\" | \"created_by\">): Promise<Company> => {\n    const response = await fetch(`${API_BASE_URL}/companies/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify(data),\n    })\n    return handleResponse<Company>(response)\n  },\n\n  update: async (id: number, data: Partial<Omit<Company, \"id\" | \"created_at\" | \"created_by\">>): Promise<Company> => {\n    const response = await fetch(`${API_BASE_URL}/companies/${id}/`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\", ...getAuthHeaders() },\n      body: JSON.stringify(data),\n    })\n    return handleResponse<Company>(response)\n  },\n}\n\n// Documents API\nexport const documentsApi = {\n  upload: async (file: File, docType: string, applicationId?: number): Promise<Document> => {\n    const formData = new FormData()\n    formData.append(\"file\", file)\n    formData.append(\"doc_type\", docType)\n    if (applicationId) formData.append(\"application\", String(applicationId))\n\n    const response = await fetch(`${API_BASE_URL}/documents/upload/`, {\n      method: \"POST\",\n      headers: { ...getAuthHeaders() },\n      body: formData,\n    })\n    return handleResponse<Document>(response)\n  },\n}\n\n// Messages API\nexport const messagesApi = {\n  list: async (limit = 50, offset = 0): Promise<PaginatedResponse<ChatMessage>> => {\n    const response = await fetch(`${API_BASE_URL}/messages/?limit=${limit}&offset=${offset}`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<PaginatedResponse<ChatMessage>>(response)\n  },\n\n  getApplicationMessages: async (applicationId: number): Promise<ChatMessage[]> => {\n    const response = await fetch(`${API_BASE_URL}/messages/application_messages/?application=${applicationId}`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<ChatMessage[]>(response)\n  },\n\n  send: async (text: string, applicationId?: number, attachment?: File): Promise<ChatMessage> => {\n    const formData = new FormData()\n    formData.append(\"text\", text)\n    if (applicationId) formData.append(\"application\", String(applicationId))\n    if (attachment) formData.append(\"attachment\", attachment)\n\n    const response = await fetch(`${API_BASE_URL}/messages/`, {\n      method: \"POST\",\n      headers: { ...getAuthHeaders() },\n      body: formData,\n    })\n    return handleResponse<ChatMessage>(response)\n  },\n\n  markAsRead: async (id: number): Promise<ChatMessage> => {\n    const response = await fetch(`${API_BASE_URL}/messages/${id}/mark_as_read/`, {\n      method: \"POST\",\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<ChatMessage>(response)\n  },\n}\n\n// News API\nexport const newsApi = {\n  list: async (): Promise<News[]> => {\n    const response = await fetch(`${API_BASE_URL}/news/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<News[]>(response)\n  },\n\n  get: async (id: number): Promise<News> => {\n    const response = await fetch(`${API_BASE_URL}/news/${id}/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<News>(response)\n  },\n\n  getLatest: async (): Promise<News[]> => {\n    const response = await fetch(`${API_BASE_URL}/news/latest/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<News[]>(response)\n  },\n\n  getCbr: async (): Promise<News[]> => {\n    const response = await fetch(`${API_BASE_URL}/news/cbr/`, {\n      headers: { ...getAuthHeaders() },\n    })\n    return handleResponse<News[]>(response)\n  },\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///home/xushnudbek/lider-garant-frontend-tz/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { authApi, type UserProfile, type UserRole } from \"@/lib/api\"\n\ninterface AuthContextType {\n  user: UserProfile | null\n  isLoading: boolean\n  isAuthenticated: boolean\n  login: (username: string, password: string) => Promise<UserRole>\n  logout: () => void\n  refreshProfile: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<UserProfile | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  const refreshProfile = async () => {\n    try {\n      const profile = await authApi.getProfile()\n      setUser(profile)\n    } catch {\n      setUser(null)\n      localStorage.removeItem(\"access_token\")\n      localStorage.removeItem(\"refresh_token\")\n    }\n  }\n\n  useEffect(() => {\n    const initAuth = async () => {\n      const token = localStorage.getItem(\"access_token\")\n      if (token) {\n        await refreshProfile()\n      }\n      setIsLoading(false)\n    }\n    initAuth()\n  }, [])\n\n  const login = async (username: string, password: string): Promise<UserRole> => {\n    const response = await authApi.login(username, password)\n    localStorage.setItem(\"access_token\", response.access)\n    localStorage.setItem(\"refresh_token\", response.refresh)\n\n    const profile = await authApi.getProfile()\n    setUser(profile)\n    return profile.role\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"access_token\")\n    localStorage.removeItem(\"refresh_token\")\n    setUser(null)\n    router.push(\"/auth/login\")\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        logout,\n        refreshProfile,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AACA;AALA;;;;;AAgBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAqB;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,UAAU,MAAM,qHAAO,CAAC,UAAU;YACxC,QAAQ;QACV,EAAE,OAAM;YACN,QAAQ;YACR,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,MAAM;YACR;YACA,aAAa;QACf;QACA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,UAAkB;QACrC,MAAM,WAAW,MAAM,qHAAO,CAAC,KAAK,CAAC,UAAU;QAC/C,aAAa,OAAO,CAAC,gBAAgB,SAAS,MAAM;QACpD,aAAa,OAAO,CAAC,iBAAiB,SAAS,OAAO;QAEtD,MAAM,UAAU,MAAM,qHAAO,CAAC,UAAU;QACxC,QAAQ;QACR,OAAO,QAAQ,IAAI;IACrB;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///home/xushnudbek/lider-garant-frontend-tz/components/ui/sonner.tsx"],"sourcesContent":["'use client'\n\nimport { useTheme } from 'next-themes'\nimport { Toaster as Sonner, ToasterProps } from 'sonner'\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,4JAAQ;IAErC,qBACE,8OAAC,mJAAM;QACL,OAAO;QACP,WAAU;QACV,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf"}}]
}